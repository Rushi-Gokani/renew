{% doc %}
  @prompt
    Create a full-width two-column Shopify section with a left-aligned headline ("Refer Friends & Save"), short descriptive copy, and a prominent rounded CTA button; place a large product/photo on the right that slightly overlaps the section edge; use a soft green background, Apple-style serif headline and clean sans body font, accessible markup, responsive stack on mobile, and editable settings for heading, text, button label/URL, background color and right-side image.

{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-refer-friends-section-{{ ai_gen_id }} {
    width: 100vw;
    margin-left: calc(-50vw + 50%);
    background-color: {{ block.settings.background_color }};
    padding: 60px 0;
    overflow: hidden;
  }

  .ai-refer-friends-container-{{ ai_gen_id }} {
    max-width: 1440px;
    margin: 0 auto;
    padding: 0 20px;display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 60px;
    align-items: center;
  }

  .ai-refer-friends-content-{{ ai_gen_id }} {
    padding-right: 40px;
  }

  .ai-refer-friends-heading-{{ ai_gen_id }} {
    font-size: 48px;
    font-weight: 400;
    line-height: 1.1;
    color: {{ block.settings.text_color }};
    margin: 0 0 24px 0;
    letter-spacing: -0.02em;
  }

  .ai-refer-friends-text-{{ ai_gen_id }} {
    font-size: 18px;
    line-height: 1.5;
    color: {{ block.settings.text_color }};
    margin: 0 0 32px 0;
    opacity: 0.8;
  }

  .ai-refer-friends-button-{{ ai_gen_id }} {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 16px 32px;
    background-color: {{ block.settings.button_color }};
    color: {{ block.settings.button_text_color }};
    text-decoration: none;
    border-radius: 8px;
    font-size: 16px;
    font-weight: 500;
    transition: all 0.3s ease;
    border: none;
    cursor: pointer;
    min-height: 52px;
  }

  .ai-refer-friends-button-{{ ai_gen_id }}:hover {
    background-color: {{ block.settings.button_hover_color }};
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
  }

  .ai-refer-friends-image-wrapper-{{ ai_gen_id }} {
    position: relative;
    margin-right: -60px;
    height: 500px;
  }

  .ai-refer-friends-image-{{ ai_gen_id }} {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 20px;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
  }

  .ai-refer-friends-image-placeholder-{{ ai_gen_id }} {
    width: 100%;
    height: 100%;
    background-color: #f8f9fa;
    border-radius: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
  }

  .ai-refer-friends-image-placeholder-{{ ai_gen_id }} svg {
    width: 80px;
    height: 80px;
    opacity: 0.3;
  }

  .ai-refer-friends-empty-state-{{ ai_gen_id }} {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(255, 255, 255, 0.9);
    padding: 12px 20px;
    border-radius: 20px;
    font-size: 14px;
    color: #666;
    text-align: center;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  }

  @media screen and (max-width: 768px) {
    .ai-refer-friends-section-{{ ai_gen_id }} {
      padding: 40px 0;}

    .ai-refer-friends-container-{{ ai_gen_id }} {
      grid-template-columns: 1fr;
      gap: 40px;
      padding: 0 20px;
    }

    .ai-refer-friends-content-{{ ai_gen_id }} {
      padding-right: 0;
      text-align: center;
      order: 2;
    }

    .ai-refer-friends-heading-{{ ai_gen_id }} {
      font-size: 36px;
      margin-bottom: 20px;
    }

    .ai-refer-friends-text-{{ ai_gen_id }} {
      font-size: 16px;
      margin-bottom: 28px;
    }

    .ai-refer-friends-image-wrapper-{{ ai_gen_id }} {
      margin-right: 0;
      height: 300px;
      order: 1;
    }

    .ai-refer-friends-button-{{ ai_gen_id }} {
      padding: 14px 28px;
      font-size: 15px;
    }
  }

  @media screen and (max-width: 480px) {
    .ai-refer-friends-container-{{ ai_gen_id }} {
      padding: 0 16px;
    }

    .ai-refer-friends-heading-{{ ai_gen_id }} {
      font-size: 28px;
    }

    .ai-refer-friends-image-wrapper-{{ ai_gen_id }} {
      height: 250px;
    }
  }
{% endstyle %}

<section
  class="ai-refer-friends-section-{{ ai_gen_id }}"
  {{ block.shopify_attributes }}role="region"
  aria-labelledby="ai-refer-friends-heading-{{ ai_gen_id }}"
>
  <div class="ai-refer-friends-container-{{ ai_gen_id }}">
    <div class="ai-refer-friends-content-{{ ai_gen_id }}">
      {% if block.settings.heading != blank %}
        <h2 
          id="ai-refer-friends-heading-{{ ai_gen_id }}"
          class="ai-refer-friends-heading-{{ ai_gen_id }}"
        >
          {{ block.settings.heading }}
        </h2>
      {% endif %}

      {% if block.settings.description != blank %}
        <div class="ai-refer-friends-text-{{ ai_gen_id }}">
          {{ block.settings.description }}
        </div>
      {% endif %}

      {% if block.settings.button_label != blank %}
        <a
          href="{{ block.settings.button_url | default: '#' }}"
          class="ai-refer-friends-button-{{ ai_gen_id }}"
          {% if block.settings.button_url == blank %}
            role="button"
            aria-disabled="true"
          {% endif %}
        >
          {{ block.settings.button_label }}
        </a>
      {% endif %}
    </div>

    <div class="ai-refer-friends-image-wrapper-{{ ai_gen_id }}">
      {% if block.settings.image %}
        <img
          src="{{ block.settings.image | image_url: width: 800 }}"
          alt="{{ block.settings.image.alt | escape }}"
          class="ai-refer-friends-image-{{ ai_gen_id }}"
          loading="lazy"
          width="{{ block.settings.image.width }}"
          height="{{ block.settings.image.height }}"
        >
      {% else %}
        <div class="ai-refer-friends-image-placeholder-{{ ai_gen_id }}">
          {{ 'product-apparel-1' | placeholder_svg_tag }}
          <div class="ai-refer-friends-empty-state-{{ ai_gen_id }}">
            Add an image to complete the section
          </div>
        </div>
      {% endif %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Refer friends section",
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Refer Friends & Save"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description",
      "default": "<p>Share the love and earn rewards! When your friends make their first purchase, you both get exclusive discounts. It's our way of saying thank you for spreading the word about products you love.</p>"
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button label",
      "default": "Start Referring"
    },
    {
      "type": "url",
      "id": "button_url",
      "label": "Button link"
    },
    {
      "type": "header",
      "content": "Image"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Right side image"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#f0f7f4"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#1a1a1a"
    },
    {
      "type": "color",
      "id": "button_color",
      "label": "Button color",
      "default": "#2d5a3d"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button text color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_hover_color",
      "label": "Button hover color",
      "default": "#1e3d29"
    }
  ],
  "presets": [
    {
      "name": "Refer friends section"
    }
  ],
  "tag": null
}
{% endschema %}