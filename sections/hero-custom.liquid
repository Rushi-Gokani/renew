{% comment %}
  Hero Section with Mobile/Desktop Images and Responsive Content
  Features:
  - Separate desktop and mobile images
  - Responsive heading and subheading positioning
  - Button with customizable link
  - Mobile and desktop specific padding
{% endcomment %}

{% liquid
  # Image handling
  assign has_desktop_image = false
  assign has_mobile_image = false

  if section.settings.desktop_image != blank
    assign has_desktop_image = true
  endif

  if section.settings.mobile_image != blank
    assign has_mobile_image = true
  endif

  # Content positioning
  assign content_position_desktop = section.settings.content_position_desktop
  assign content_position_mobile = section.settings.content_position_mobile | default: content_position_desktop

  # Padding
  assign padding_desktop = section.settings.padding_desktop | default: '40px 20px'
  assign padding_mobile = section.settings.padding_mobile | default: '30px 15px'

  # Colors
  assign heading_color = section.settings.heading_color
  assign subheading_color = section.settings.subheading_color
  assign button_bg_color = section.settings.button_bg_color
  assign button_text_color = section.settings.button_text_color

  # Blurred reflection
  assign blurred_reflection = section.settings.blurred_reflection
  assign reflection_opacity = section.settings.reflection_opacity | default: 75
%}

<div
  class="hero-custom"
  id="HeroCustom-{{ section.id }}"
  style="
    --hero-padding-desktop: {{ padding_desktop }};
    --hero-padding-mobile: {{ padding_mobile }};
    --desktop-image: {% if has_desktop_image %}url('{{ section.settings.desktop_image | image_url: width: 1920 }}'){% else %}url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1 1\"><rect width=\"1\" height=\"1\" fill=\"%23667eea\"/></svg>'){% endif %};
    --mobile-image: {% if has_mobile_image %}url('{{ section.settings.mobile_image | image_url: width: 750 }}'){% elsif has_desktop_image %}url('{{ section.settings.desktop_image | image_url: width: 750 }}'){% else %}url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1 1\"><rect width=\"1\" height=\"1\" fill=\"%23764ba2\"/></svg>'){% endif %};
    --reflection-opacity: {{ reflection_opacity | divided_by: 100.0 }};
  "
  {% if blurred_reflection and has_desktop_image %}
    data-blur-shadow="true"
  {% endif %}
>
  {% if blurred_reflection and has_desktop_image %}
    <div class="hero-custom__blurred-image">
      <div class="hero-custom__background" style="background-image: var(--desktop-image);"></div>
    </div>
  {% endif %}

  <div class="hero-custom__background"></div>

  <div class="hero-custom__container">
    <div class="hero-custom__content" style="
      --content-position-desktop: {{ content_position_desktop }};
      --content-position-mobile: {{ content_position_mobile }};
      {% if heading_color %}--heading-color: {{ heading_color }};{% endif %}
      {% if subheading_color %}--subheading-color: {{ subheading_color }};{% endif %}
      {% if button_bg_color %}--button-bg-color: {{ button_bg_color }};{% endif %}
      {% if button_text_color %}--button-text-color: {{ button_text_color }};{% endif %}
    ">
      {% if section.settings.heading != blank %}
        <h1 class="hero-custom__heading">{{ section.settings.heading }}</h1>
      {% endif %}

      {% if section.settings.subheading != blank %}
        <p class="hero-custom__subheading">{{ section.settings.subheading }}</p>
      {% endif %}

      {% if section.settings.button_text != blank and section.settings.button_link != blank %}
        <a href="{{ section.settings.button_link }}" class="hero-custom__button">
          {{ section.settings.button_text }}
        </a>
      {% endif %}
    </div>
  </div>
</div>

<style>
  .hero-custom {
    position: relative;
    min-height: 60vh;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }

  /* Base styles */
  .hero-custom__background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    z-index: -1;
    /* Default gradient fallback */
    background-image: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  }

  /* Mobile styles - only apply on mobile devices */
  @media (max-width: 767px) {
    .hero-custom__background {
      background-image: var(--mobile-image);
    }

    .hero-custom {
      padding: var(--hero-padding-mobile);
    }
  }

  /* Desktop styles - only apply on desktop devices (768px+) */
  @media (min-width: 768px) {
    .hero-custom__background {
      background-image: var(--desktop-image);
    }

    .hero-custom {
      padding: var(--hero-padding-desktop);
    }
  }

  .hero-custom__container {
    position: relative;
    z-index: 1;
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .hero-custom__content {
    text-align: center;
    max-width: 600px;
    color: var(--heading-color, white);
  }

  .hero-custom__heading {
    font-size: 3rem;
    font-weight: bold;
    margin-bottom: 1rem;
    color: var(--heading-color, white);
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
  }

  .hero-custom__subheading {
    font-size: 1.2rem;
    margin-bottom: 2rem;
    color: var(--subheading-color, white);
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    line-height: 1.5;
  }

  .hero-custom__button {
    display: inline-block;
    padding: 12px 24px;
    background-color: var(--button-bg-color, rgba(255, 255, 255, 0.9));
    color: var(--button-text-color, #333);
    text-decoration: none;
    border-radius: 4px;
    font-weight: bold;
    transition: all 0.3s ease;
    text-shadow: none;
  }

  .hero-custom__button:hover {
    background-color: var(--button-bg-color, white);
    color: var(--button-text-color, #333);
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  }

  /* Desktop content positioning */
  @media (min-width: 768px) {
    .hero-custom__content {
      position: var(--content-position-desktop, static);
      transform: translate(
        {% case content_position_desktop %}
          {% when 'top-left' %}-50%, -50%
          {% when 'top-center' %}0, -50%
          {% when 'top-right' %}50%, -50%
          {% when 'center-left' %}-50%, 0
          {% when 'center' %}0, 0
          {% when 'center-right' %}50%, 0
          {% when 'bottom-left' %}-50%, 50%
          {% when 'bottom-center' %}0, 50%
          {% when 'bottom-right' %}50%, 50%
          {% else %}0, 0
        {% endcase %}
      );
    }
  }

  /* Mobile content positioning */
  @media (max-width: 767px) {
    .hero-custom__content {
      position: var(--content-position-mobile, static);
      transform: translate(
        {% case content_position_mobile %}
          {% when 'top-left' %}-50%, -50%
          {% when 'top-center' %}0, -50%
          {% when 'top-right' %}50%, -50%
          {% when 'center-left' %}-50%, 0
          {% when 'center' %}0, 0
          {% when 'center-right' %}50%, 0
          {% when 'bottom-left' %}-50%, 50%
          {% when 'bottom-center' %}0, 50%
          {% when 'bottom-right' %}50%, 50%
          {% else %}0, 0
        {% endcase %}
      );
    }
  }

  /* Mobile responsive text */
  @media (max-width: 767px) {
    .hero-custom__heading {
      font-size: 2rem;
    }

    .hero-custom__subheading {
      font-size: 1rem;
    }
  }

  .hero-custom__heading {
    font-size: 3rem;
    font-weight: bold;
    margin-bottom: 1rem;
    color: var(--heading-color, white);
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
  }

  .hero-custom__subheading {
    font-size: 1.2rem;
    margin-bottom: 2rem;
    color: var(--subheading-color, white);
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    line-height: 1.5;
  }

  .hero-custom__button {
    display: inline-block;
    padding: 12px 24px;
    background-color: var(--button-bg-color, rgba(255, 255, 255, 0.9));
    color: var(--button-text-color, #333);
    text-decoration: none;
    border-radius: 4px;
    font-weight: bold;
    transition: all 0.3s ease;
    text-shadow: none;
  }

  .hero-custom__button:hover {
    background-color: var(--button-bg-color, white);
    color: var(--button-text-color, #333);
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  }

  /* Mobile responsive text */
  @media (max-width: 767px) {
    .hero-custom__heading {
      font-size: 2rem;
    }

    .hero-custom__subheading {
      font-size: 1rem;
    }
  }

  /* Blurred reflection styles */
  .hero-custom[data-blur-shadow='true'] {
    --blurred-reflection-filter-saturate: saturate(1.5);
    --blurred-reflection-mask-image: linear-gradient(to bottom, #000 0%, #000 60%, transparent 100%);
    --blurred-reflection-box-shadow: rgb(0 0 0 / 5%) 0 0 1rem;
    --blurred-reflection-filter-blur: blur(20px);
    --blurred-reflection-scale: scale(2, 1.25);
    --blurred-reflection-padding-block-end: 60px;
  }

  .hero-custom__blurred-image {
    position: absolute;
    inset: 0;
    z-index: -1;
    mask-image: var(--blurred-reflection-mask-image);
    filter: var(--blurred-reflection-filter-saturate);
    pointer-events: none;
    transform: translateY(50%);
    overflow: hidden;
  }

  .hero-custom__blurred-image .hero-custom__background {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    background-image: url('{{ section.settings.desktop_image | image_url: width: 1920 }}');
    filter: var(--blurred-reflection-filter-blur);
    opacity: var(--reflection-opacity);
    transform: var(--blurred-reflection-scale);
    padding-block-end: var(--blurred-reflection-padding-block-end);
  }

</style>

{% schema %}
{
  "name": "Hero Custom",
  "tag": "section",
  "class": "hero-custom-section",
  "settings": [
    {
      "type": "header",
      "content": "Images"
    },
    {
      "type": "image_picker",
      "id": "desktop_image",
      "label": "Desktop Image"
    },
    {
      "type": "image_picker",
      "id": "mobile_image",
      "label": "Mobile Image",
      "info": "Leave blank to use desktop image on mobile"
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Welcome to Our Store"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "Discover amazing products and great deals"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Shop Now"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button Link"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "subheading_color",
      "label": "Subheading Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_bg_color",
      "label": "Button Background Color",
      "default": "#ffffff",
      "alpha": true
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button Text Color",
      "default": "#333333"
    },
    {
      "type": "header",
      "content": "Effects"
    },
    {
      "type": "checkbox",
      "id": "blurred_reflection",
      "label": "Blurred Reflection",
      "default": false,
      "info": "Applies to desktop image only. Adds a subtle blurred reflection effect."
    },
    {
      "type": "range",
      "id": "reflection_opacity",
      "label": "Reflection Opacity",
      "min": 10,
      "max": 100,
      "step": 5,
      "unit": "%",
      "default": 75,
      "visible_if": "{{ section.settings.blurred_reflection }}"
    },
    {
      "type": "header",
      "content": "Desktop Positioning"
    },
    {
      "type": "select",
      "id": "content_position_desktop",
      "label": "Content Position (Desktop)",
      "options": [
        {
          "value": "top-left",
          "label": "Top Left"
        },
        {
          "value": "top-center",
          "label": "Top Center"
        },
        {
          "value": "top-right",
          "label": "Top Right"
        },
        {
          "value": "center-left",
          "label": "Center Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "center-right",
          "label": "Center Right"
        },
        {
          "value": "bottom-left",
          "label": "Bottom Left"
        },
        {
          "value": "bottom-center",
          "label": "Bottom Center"
        },
        {
          "value": "bottom-right",
          "label": "Bottom Right"
        }
      ],
      "default": "center"
    },
    {
      "type": "header",
      "content": "Mobile Positioning"
    },
    {
      "type": "select",
      "id": "content_position_mobile",
      "label": "Content Position (Mobile)",
      "options": [
        {
          "value": "top-left",
          "label": "Top Left"
        },
        {
          "value": "top-center",
          "label": "Top Center"
        },
        {
          "value": "top-right",
          "label": "Top Right"
        },
        {
          "value": "center-left",
          "label": "Center Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "center-right",
          "label": "Center Right"
        },
        {
          "value": "bottom-left",
          "label": "Bottom Left"
        },
        {
          "value": "bottom-center",
          "label": "Bottom Center"
        },
        {
          "value": "bottom-right",
          "label": "Bottom Right"
        }
      ],
      "default": "center",
      "info": "Defaults to desktop position if not set"
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "text",
      "id": "padding_desktop",
      "label": "Desktop Padding",
      "default": "60px 20px",
      "info": "Format: 'top-bottom left-right' (e.g., '60px 20px')"
    },
    {
      "type": "text",
      "id": "padding_mobile",
      "label": "Mobile Padding",
      "default": "40px 15px",
      "info": "Format: 'top-bottom left-right' (e.g., '40px 15px')"
    }
  ],
  "presets": [
    {
      "name": "Hero Custom",
      "settings": {
        "heading": "Welcome to Our Store",
        "subheading": "Discover amazing products and great deals",
        "button_text": "Shop Now",
        "button_link": "#",
        "content_position_desktop": "center",
        "content_position_mobile": "center",
        "padding_desktop": "60px 20px",
        "padding_mobile": "40px 15px",
        "heading_color": "#ffffff",
        "subheading_color": "#ffffff",
        "button_bg_color": "#ffffff",
        "button_text_color": "#333333"
      }
    }
  ]
}
{% endschema %}
